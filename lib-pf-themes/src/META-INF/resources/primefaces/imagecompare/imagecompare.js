(function(n,f){var x={sliders:[],OPTIMIZATION_ACCEPTED:1,OPTIMIZATION_WAS_CONSTRAINED:2};var r="d90fc2d1f4acc584e08b8eaea5bf4d6c";var u=["Large","Medium"];function o(A,B){var z=this;this.image=new Image;this.loaded=false;this.image.onload=function(){z.loaded=true;B._onLoaded()};this.image.src=A.src;this.image.alt=A.alt||"";this.label=A.label||false;this.credit=A.credit||false}function p(A,B){var z=this;this.image=new Image;this.loaded=false;this.image.onload=function(){z.loaded=true;B._onLoaded()};this.flickrID=this.getFlickrID(A.src);this.callFlickrAPI(this.flickrID,z);this.label=A.label||false;this.credit=A.credit||false}p.prototype={getFlickrID:function(A){if(A.match(/flic.kr\/.+/i)){var C=A.split("/").slice(-1)[0];return c(C)}var z=A.indexOf("flickr.com/photos/");var D=z+"flickr.com/photos/".length;var B=A.substr(D);if(B.indexOf("/")==-1){return null}if(B.indexOf("/")===0){B=B.substr(1)}id=B.split("/")[1];return id},callFlickrAPI:function(C,z){var A="https://api.flickr.com/services/rest/?method=flickr.photos.getSizes&api_key="+r+"&photo_id="+C+"&format=json&nojsoncallback=1";var B=new XMLHttpRequest;B.open("GET",A,true);B.onload=function(){if(B.status>=200&&B.status<400){data=JSON.parse(B.responseText);var D=z.bestFlickrUrl(data.sizes.size);z.setFlickrImage(D)}else{console.error("There was an error getting the picture from Flickr")}};B.onerror=function(){console.error("There was an error getting the picture from Flickr")};B.send()},setFlickrImage:function(z){this.image.src=z},bestFlickrUrl:function(B){var C={};for(var A=0;A<B.length;A++){C[B[A].label]=B[A].source}for(var z=0;z<u.length;z++){if(u[z] in C){return C[u[z]]}}return B[0].source}};function a(A){if(A.naturalWidth&&A.naturalHeight){return{width:A.naturalWidth,height:A.naturalHeight}}var z=new Image;z.src=A.src;return{width:z.width,height:z.height}}function s(z){var A={width:a(z).width,height:a(z).height,aspect:function(){return this.width/this.height}};return A}function j(z,A){if(z.classList){z.classList.add(A)}else{z.className+=" "+A}}function k(z,A){z.className=z.className.replace(/(\S+)\s*/g,function(B,C){if(C===A){return""}return B}).replace(/^\s+/,"")}function q(z,A){if(n.body.textContent){z.textContent=A}else{z.innerText=A}}function b(z){if(f.getComputedStyle){return{width:parseInt(getComputedStyle(z).width,10),height:parseInt(getComputedStyle(z).height,10)}}else{w=z.getBoundingClientRect().right-z.getBoundingClientRect().left;h=z.getBoundingClientRect().bottom-z.getBoundingClientRect().top;return{width:parseInt(w,10)||0,height:parseInt(h,10)||0}}}function v(){var A=f,z="inner";if(!("innerWidth" in f)){z="client";A=n.documentElement||n.body}return{width:A[z+"Width"],height:A[z+"Height"]}}function i(A){var z;if(A.pageX){z=A.pageX}else{if(A.touches){z=A.touches[0].pageX}else{z=A.clientX+n.body.scrollLeft+n.documentElement.scrollLeft}}return z}function g(A){var z;if(A.pageY){z=A.pageY}else{if(A.touches){z=A.touches[0].pageY}else{z=A.clientY+n.body.scrollTop+n.documentElement.scrollTop}}return z}function e(A){if(A.match(/flic.kr\/.+/i)){return true}var z=A.indexOf("flickr.com/photos/");if(z==-1){return false}else{return true}}function c(D){var C="123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ",A=C.length;if(typeof D!=="string"){throw'"base58Decode" only accepts strings.'}var z=0;while(D){var E=C.indexOf(D[0]);if(E<0){throw'"base58Decode" can\'t find "'+D[0]+'" in the alphabet: "'+C+'"'}var B=D.length-1;z+=E*Math.pow(A,B);D=D.substring(1)}return z.toString()}function t(E,z){if(typeof z==="string"||typeof z==="number"){leftPercent=parseInt(z,10)}else{var A=E.getBoundingClientRect();var F={top:A.top+n.body.scrollTop+n.documentElement.scrollTop,left:A.left+n.body.scrollLeft+n.documentElement.scrollLeft};var D=E.offsetWidth;var C=i(z);var B=C-F.left;leftPercent=B/D*100}return leftPercent}function m(E,z){if(typeof z==="string"||typeof z==="number"){topPercent=parseInt(z,10)}else{var C=E.getBoundingClientRect();var F={top:C.top+n.body.scrollTop+n.documentElement.scrollTop,left:C.left+n.body.scrollLeft+n.documentElement.scrollLeft};var D=E.offsetHeight;var B=g(z);var A=B-F.top;topPercent=A/D*100}return topPercent}var d={animate:true,showLabels:true,showCredits:true,makeResponsive:true};function l(z){if(typeof z!="string"){return Boolean(z)}return !(z==="false"||z==="")}function y(A,z,B){this.selector=A;var C;this.options={animate:true,showLabels:true,showCredits:true,makeResponsive:true,startingPosition:"50%",mode:"horizontal",callback:null};for(C in this.options){if(C in B){if(C in d){this.options[C]=l(B[C])}else{this.options[C]=B[C]}}}if(z.length==2){if(e(z[0].src)){this.imgBefore=new p(z[0],this)}else{this.imgBefore=new o(z[0],this)}if(e(z[1].src)){this.imgAfter=new p(z[1],this)}else{this.imgAfter=new o(z[1],this)}}else{console.warn("The images parameter takes two Image objects.")}if(this.imgBefore.credit||this.imgAfter.credit){this.options.showCredits=true}else{this.options.showCredits=false}}y.prototype={updateSlider:function(B,A){var C,z;if(this.options.mode==="vertical"){C=m(this.slider,B)}else{C=t(this.slider,B)}C=C.toFixed(2)+"%";leftPercentNum=parseFloat(C);z=100-leftPercentNum+"%";if(leftPercentNum>0&&leftPercentNum<100){k(this.handle,"transition");k(this.rightImage,"transition");k(this.leftImage,"transition");if(this.options.animate&&A){j(this.handle,"transition");j(this.leftImage,"transition");j(this.rightImage,"transition")}if(this.options.mode==="vertical"){this.handle.style.top=C;this.leftImage.style.height=C;this.rightImage.style.height=z}else{this.handle.style.left=C;this.leftImage.style.width=C;this.rightImage.style.width=z}this.sliderPosition=C}},getPosition:function(){return this.sliderPosition},displayLabel:function(z,A){label=n.createElement("div");label.className="jx-label";label.setAttribute("tabindex",0);q(label,A);z.appendChild(label)},displayCredits:function(){credit=n.createElement("div");credit.className="jx-credit";text="<em>Photo Credits:</em>";if(this.imgBefore.credit){text+=" <em>Before</em> "+this.imgBefore.credit}if(this.imgAfter.credit){text+=" <em>After</em> "+this.imgAfter.credit}credit.innerHTML=text;this.wrapper.appendChild(credit)},setStartingPosition:function(z){this.options.startingPosition=z},checkImages:function(){if(s(this.imgBefore.image).aspect()==s(this.imgAfter.image).aspect()){return true}else{return false}},calculateDims:function(B,z){var A=s(this.imgBefore.image).aspect();if(B){z=B/A}else{if(z){B=z*A}}return{width:B,height:z,ratio:A}},responsivizeIframe:function(z){if(z.height<f.innerHeight){if(z.ratio>=1){this.wrapper.style.paddingTop=parseInt((f.innerHeight-z.height)/2)+"px"}}else{if(z.height>f.innerHeight){z=this.calculateDims(0,f.innerHeight);this.wrapper.style.paddingLeft=parseInt((f.innerWidth-z.width)/2)+"px"}}if(this.options.showCredits){z.height-=13}return z},setWrapperDimensions:function(){var z=b(this.wrapper).width;var A=b(this.wrapper).height;var B=this.calculateDims(z,A);if(f.location!==f.parent.location&&!this.options.makeResponsive){B=this.responsivizeIframe(B)}this.wrapper.style.height=parseInt(B.height)+"px";this.wrapper.style.width=parseInt(B.width)+"px"},optimizeWrapper:function(A){var z=x.OPTIMIZATION_ACCEPTED;if(this.imgBefore.image.naturalWidth>=A&&this.imgAfter.image.naturalWidth>=A){this.wrapper.style.width=A+"px";z=x.OPTIMIZATION_WAS_CONSTRAINED}else{if(this.imgAfter.image.naturalWidth<A){this.wrapper.style.width=this.imgAfter.image.naturalWidth+"px"}else{this.wrapper.style.width=this.imgBefore.image.naturalWidth+"px"}}this.setWrapperDimensions();return z},_onLoaded:function(){if(this.imgBefore&&this.imgBefore.loaded===true&&this.imgAfter&&this.imgAfter.loaded===true){this.wrapper=n.querySelector(this.selector);j(this.wrapper,"juxtapose");this.wrapper.style.width=a(this.imgBefore.image).width;this.setWrapperDimensions();this.slider=n.createElement("div");this.slider.className="jx-slider";this.wrapper.appendChild(this.slider);if(this.options.mode!="horizontal"){j(this.slider,this.options.mode)}this.handle=n.createElement("div");this.handle.className="jx-handle";this.rightImage=n.createElement("div");this.rightImage.className="jx-image jx-right";this.rightImage.appendChild(this.imgAfter.image);this.leftImage=n.createElement("div");this.leftImage.className="jx-image jx-left";this.leftImage.appendChild(this.imgBefore.image);this.labCredit=n.createElement("a");this.labCredit.setAttribute("href","http://juxtapose.knightlab.com");this.labCredit.setAttribute("target","_blank");this.labCredit.className="jx-knightlab";this.labLogo=n.createElement("div");this.labLogo.className="knightlab-logo";this.labCredit.appendChild(this.labLogo);this.projectName=n.createElement("span");this.projectName.className="juxtapose-name";q(this.projectName,"JuxtaposeJS");this.labCredit.appendChild(this.projectName);this.slider.appendChild(this.handle);this.slider.appendChild(this.leftImage);this.slider.appendChild(this.rightImage);this.slider.appendChild(this.labCredit);this.leftArrow=n.createElement("div");this.rightArrow=n.createElement("div");this.control=n.createElement("div");this.controller=n.createElement("div");this.leftArrow.className="jx-arrow jx-left";this.rightArrow.className="jx-arrow jx-right";this.control.className="jx-control";this.controller.className="jx-controller";this.controller.setAttribute("tabindex",0);this.controller.setAttribute("role","slider");this.controller.setAttribute("aria-valuenow",50);this.controller.setAttribute("aria-valuemin",0);this.controller.setAttribute("aria-valuemax",100);this.handle.appendChild(this.leftArrow);this.handle.appendChild(this.control);this.handle.appendChild(this.rightArrow);this.control.appendChild(this.controller);this._init()}},_init:function(){if(this.checkImages()===false){console.warn(this,"Check that the two images have the same aspect ratio for the slider to work correctly.")}this.updateSlider(this.options.startingPosition,false);if(this.options.showLabels===true){if(this.imgBefore.label){this.displayLabel(this.leftImage,this.imgBefore.label)}if(this.imgAfter.label){this.displayLabel(this.rightImage,this.imgAfter.label)}}if(this.options.showCredits===true){this.displayCredits()}var z=this;f.addEventListener("resize",function(){z.setWrapperDimensions()});this.slider.addEventListener("mousedown",function(A){A=A||f.event;A.preventDefault();z.updateSlider(A,true);animate=true;this.addEventListener("mousemove",function(B){B=B||f.event;B.preventDefault();if(animate){z.updateSlider(B,false)}});this.addEventListener("mouseup",function(B){B=B||f.event;B.preventDefault();B.stopPropagation();this.removeEventListener("mouseup",arguments.callee);animate=false})});this.slider.addEventListener("touchstart",function(A){A=A||f.event;A.preventDefault();A.stopPropagation();z.updateSlider(A,true);this.addEventListener("touchmove",function(B){B=B||f.event;B.preventDefault();B.stopPropagation();z.updateSlider(event,false)})});this.handle.addEventListener("keydown",function(E){E=E||f.event;var C=E.which||E.keyCode;var D=parseFloat(this.style.left);if(C==37){D=D-1;var A=parseFloat(this.style.left)-1;z.updateSlider(A,false);z.controller.setAttribute("aria-valuenow",D)}if(C==39){D=D+1;var B=parseFloat(this.style.left)+1;z.updateSlider(B,false);z.controller.setAttribute("aria-valuenow",D)}});this.leftImage.addEventListener("keydown",function(B){var A=B.which||B.keyCode;if(A==13||A==32){z.updateSlider("90%",true);z.controller.setAttribute("aria-valuenow",90)}});this.rightImage.addEventListener("keydown",function(B){var A=B.which||B.keyCode;if(A==13||A==32){z.updateSlider("10%",true);z.controller.setAttribute("aria-valuenow",10)}});x.sliders.push(this);if(this.options.callback&&typeof this.options.callback=="function"){this.options.callback(this)}}};x.makeSlider=function(D,A){if(typeof A=="undefined"){A=x.sliders.length}var B=D;var z=B.querySelectorAll("img");var C={};if(B.getAttribute("data-animate")){C.animate=B.getAttribute("data-animate")}if(B.getAttribute("data-showlabels")){C.showLabels=B.getAttribute("data-showlabels")}if(B.getAttribute("data-showcredits")){C.showCredits=B.getAttribute("data-showcredits")}if(B.getAttribute("data-startingposition")){C.startingPosition=B.getAttribute("data-startingposition")}if(B.getAttribute("data-mode")){C.mode=B.getAttribute("data-mode")}if(B.getAttribute("data-makeresponsive")){C.mode=B.getAttribute("data-makeresponsive")}specificClass="juxtapose-"+A;j(D,specificClass);selector="."+specificClass;if(B.innerHTML){B.innerHTML=""}else{B.innerText=""}slider=new x.JXSlider(selector,[{src:z[0].src,label:z[0].getAttribute("data-label"),credit:z[0].getAttribute("data-credit"),alt:z[0].alt},{src:z[1].src,label:z[1].getAttribute("data-label"),credit:z[1].getAttribute("data-credit"),alt:z[1].alt}],C)};x.scanPage=function(){var A=n.querySelectorAll(".juxtapose");for(var z=0;z<A.length;z++){x.makeSlider(A[z],z)}};x.JXSlider=y;f.juxtapose=x;x.scanPage()})(document,window);!window.addEventListener&&function(b,e,f,d,c,g,a){b[d]=e[d]=f[d]=function(i,j){var k=this;a.unshift([k,i,j,function(l){l.currentTarget=k;l.preventDefault=function(){l.returnValue=false};l.stopPropagation=function(){l.cancelBubble=true};l.target=l.srcElement||k;j.call(k,l)}]);this.attachEvent("on"+i,a[0][3])};b[c]=e[c]=f[c]=function(k,l){for(var i=0,j;j=a[i];++i){if(j[0]==this&&j[1]==k&&j[2]==l){return this.detachEvent("on"+k,a.splice(i,1)[0][3])}}};b[g]=e[g]=f[g]=function(i){return this.fireEvent("on"+i.type,i)}}(Window.prototype,HTMLDocument.prototype,Element.prototype,"addEventListener","removeEventListener","dispatchEvent",[]);PrimeFaces.widget.ImageCompare=PrimeFaces.widget.BaseWidget.extend({init:function(a){this._super(a);this.cfg.showFullLinks=false;new juxtapose.JXSlider("[id='"+this.cfg.id+"']",[{src:this.cfg.leftimage,label:"",credit:""},{src:this.cfg.rightimage,label:"",credit:""}],{animate:true,showLabels:false,showCredits:false,startingPosition:"50%",makeResponsive:false})}});